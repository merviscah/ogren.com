<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="reboot.css">
    <link rel="stylesheet" href="navbar.css">
    <link rel="stylesheet" href="container.css">
    <link rel="stylesheet" href="footer.css">
    <link rel="stylesheet" href="basket.css">
    <link rel="stylesheet" href="special.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"
        integrity="sha384-oSUqaNaBOWV3Wc/Sxop7FSiDCS1oA1T3Z6r73K0xj5Sc/YKFLlSmzzAPnC89eXkM"
        crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <div class="navbar">
        <div class="logo">
            <a class="navbar-logo" href="ogren.html">
                <img src="photos/mordeg╠åil.png" alt="ogr" width="auto" height="90">
            </a>
        </div>
        <nav class="nav-menu">
            <ul class="nav-list">
                <li class="drop-item"><a href="courses.html" class="drop-link">Courses</a></li>
                <li class="drop-item"><a href="special.html" class="drop-link">Special For You</a></li>
                <li class="drop-item"><a href="contact.html" class="drop-link">Contact Us</a></li>
                <li class="drop-item"><a href="basket.html" class="drop-link"><span
                            class="material-symbols-outlined">shopping_basket</span></a></li>
            </ul>
            <div id="clock"></div>
        </nav>
    </div>
    <div class="courses">
        <div class="sepet-title">
            <h5 class="col-xs-12">
                Special For You
            </h5>
        </div>
        <hr align="center" / width="60%" style="margin: auto;">
        <br>
        <div class="cont">
            <div class="services m-5">
                <div class="row services-box">

                    <!-- Ürün 1 -->
                    <div class="course-box col-md-4 col-xs-12" id="product1">
                        <img src="photos/phyton.jpeg" alt="" class="courseImg">
                        <br> <br>
                        <h5>Python From Scratch</h5>
                        <hr style="width: 90%;">
                        <div class="price-container">
                            <span class="original-price">₺199.99</span>
                            <span class="discounted-price"></span>
                        </div>
                        <a class="sepet"
                            onclick="addToBasketAndRedirect('product1', 'Python From Scratch', 199.99, 20)">Add
                            to Basket</a>
                    </div>

                    <!-- Ürün 2 -->
                    <div class="course-box col-md-4 col-xs-12" id="product2">
                        <img src="photos/hacker.jpeg" alt="" class="courseImg">
                        <br> <br>
                        <h5>Becoming an Ethical Hacker Course</h5>
                        <hr style="width: 90%;">
                        <div class="price-container">
                            <span class="original-price">₺199.99</span>
                            <span class="discounted-price"></span>
                        </div>
                        <a class="sepet"
                            onclick="addToBasketAndRedirect('product2', 'Becoming an Ethical Hacker Course', 199.99, 20)">Add
                            to Basket</a>
                    </div>

                    <!-- Ürün 3 -->
                    <div class="course-box col-md-4 col-xs-12" id="product3">
                        <img src="photos/java2.jpeg" alt="" class="courseImg">
                        <br> <br>
                        <h5>Java From Scratch</h5>
                        <hr style="width: 90%;">
                        <div class="price-container">
                            <span class="original-price">₺199.99</span>
                            <span class="discounted-price"></span>
                        </div>
                        <a class="sepet"
                            onclick="addToBasketAndRedirect('product3', 'Java From Scratch', 199.99, 20)">Add
                            to Basket</a>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function updateClock() {
                var now = new Date();
                var hours = now.getHours();
                var minutes = now.getMinutes();
                var seconds = now.getSeconds();

                // Saat, dakika ve saniyeyi iki haneli sayıya çevirme
                hours = hours < 10 ? "0" + hours : hours;
                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;

                // Saati güncelle
                document.getElementById('clock').textContent = hours + ":" + minutes + ":" + seconds;
            }

            // İlk çağrı
            updateClock();

            // 1 saniyede bir güncelle
            setInterval(updateClock, 1000);
            // JavaScript ile indirim hesaplaması yapacak fonksiyon
            function applyDiscount(originalPrice, discountPercentage) {
                return (originalPrice - (originalPrice * discountPercentage / 100)).toFixed(2);
            }

            // İlk yüklenme anında fiyatları ve sepeti güncelleme
            window.onload = function () {
                updatePrices('product1');
                updatePrices('product2');
                updatePrices('product3');
            };

            // Fiyatları güncelleme fonksiyonu
            function updatePrices(productId) {
                var originalPriceSpan = document.querySelector(`#${productId} .original-price`);
                var discountedPriceSpan = document.querySelector(`#${productId} .discounted-price`);

                var originalPrice = parseFloat(originalPriceSpan.innerText.replace('₺', ''));
                var discountedPrice = applyDiscount(originalPrice, 20);

                originalPriceSpan.innerText = '₺' + originalPrice.toFixed(2);
                discountedPriceSpan.innerText = '₺' + discountedPrice;
            }

            // Sepete ürün ekleyip yönlendirme fonksiyonu
            function addToBasketAndRedirect(productId, title, price, discountPercentage) {
                addToBasket(productId, title, price, discountPercentage);

                // Sepete eklendikten sonra başka bir sayfaya yönlendir
                window.location.href = "basket.html";
            }

            // Sepete ürün ekleyen fonksiyon
            function addToBasket(productId, title, price, discountPercentage) {
                // localStorage'tan önceki sepeti al
                let basket = JSON.parse(localStorage.getItem('basket')) || [];

                // İndirimli fiyatı hesapla
                let discountedPrice = applyDiscount(price, discountPercentage);

                // Yeni öğeyi sepete ekle
                basket.push({
                    productId: productId,
                    title: title,
                    price: price,
                    discountedPrice: discountedPrice
                });

                // Güncellenmiş sepeti localStorage'a kaydet
                localStorage.setItem('basket', JSON.stringify(basket));
            }


        </script>


</html>